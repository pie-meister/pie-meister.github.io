export default class t extends HTMLElement{connectedCallback(){this.svg()}svg(t=this.attachShadow({mode:`open`}),e=(this.getAttribute`stroke`||`#e33,#3e3,#35e,#ee3,#e5e,#3ee`).split`,`,i=~~this.getAttribute`pull`,s=0,r=0){setTimeout((l=>{t.innerHTML=`<style>:host{display:inline-block}svg{width:100%}</style><svg xmlns=http://www.w3.org/2000/svg viewBox=0,0,${1e3+i},${1e3+i}>${this.innerHTML}</svg>`;[...t.querySelectorAll`slice`].map(((t,l)=>{let u,o=document.createElementNS(`http://www.w3.org/2000/svg`,`g`),n=document.createElementNS(`http://www.w3.org/2000/svg`,`text`),a=t.getAttribute`size`,h=~~a.replace(`%`,``),b=~~t.getAttribute`stroke-width`||~~this.getAttribute`stroke-width`||500+i/2-i,g=s;o.create=(s=0,l=b,u=t.getAttribute(`stroke`)||0==s&&e.shift(),n=h,a=g,p=(500+i/2)/2-i/2+s-(`stroke-width`==this.getAttribute`fill`?(500-i/2-l)/2:0),A=document.createElementNS(`http://www.w3.org/2000/svg`,`path`))=>(A.setAttribute(`stroke`,u),A.setAttribute(`stroke-width`,l),A.setAttribute(`pathLength`,r),A.setAttribute(`stroke-dasharray`,n+` `+(r-n)),A.setAttribute(`stroke-dashoffset`,a+n),A.setAttribute(`d`,`m${500+i/2} ${500+i/2}m0 ${-p}a2 2 0 000 ${2*p}a2 2 0 000-${2*p}`),A.setAttribute(`fill`,`none`),A.width=l,A.point=(t=0,e)=>e?o.create(e).point(t):A.getPointAtLength(A.getTotalLength()-A.getTotalLength()/r*(t+(a+n/2))),A);h==a?r||[...this.querySelectorAll`slice`].map((t=>r+=~~t.getAttribute`size`)):r=~~this.getAttribute`size`||100;h||(h=r-s,a=h+`%`);u=o.create(0);o.point=u.point;o.setAttribute(`slice`,l);o.setAttribute(`size`,a);o.setAttribute(`label`,n.innerHTML=this.querySelector`style`?t.innerHTML&&t.innerHTML.replace(`size`,a)||a:``);u.setAttribute(`stroke-dashoffset`,s+=h);[...t.attributes].map((t=>u.setAttribute(t.name,t.value)));n.setAttribute(`y`,o.point(0,~~t.getAttribute`pulltext`||~~this.getAttribute`pulltext`||0).y);n.setAttribute(`x`,o.point(0,~~t.getAttribute`pulltext`||~~this.getAttribute`pulltext`||0).x);o.append(u,n);t.parentNode.replaceChild(o,t);let p=o.point(0,Math.abs(~~t.getAttribute`pull`||i));t.hasAttribute`pull`&&o.setAttribute(`transform`,`translate(${p.x-o.point().x} ${p.y-o.point().y})`)}))}))}}