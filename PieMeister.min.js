export default class t extends HTMLElement{connectedCallback(){this.svg()}svg(t=this.attachShadow({mode:`open`}),e=this,i=(e.getAttribute`stroke`||`#e33,#3e3,#35e,#ee3,#e5e,#3ee`).split`,`,r=~~e.getAttribute`pull`,s=0,l=0){setTimeout((u=>{t.innerHTML=`<style>:host{display:inline-block}svg{width:100%}</style><svg xmlns=http://www.w3.org/2000/svg viewBox=0,0,${1e3+r},${1e3+r}>${e.innerHTML}</svg>`;[...t.querySelectorAll`slice`].map(((t,u)=>{let o,n=document.createElementNS(`http://www.w3.org/2000/svg`,`g`),a=document.createElementNS(`http://www.w3.org/2000/svg`,`text`),b=t.getAttribute`size`,g=~~b.replace(`%`,``),p=~~t.getAttribute`stroke-width`||~~e.getAttribute`stroke-width`||500+r/2-r,A=s;n.create=(s=0,u=p,o=t.getAttribute(`stroke`)||0==s&&i.shift(),a=g,b=A,h=(500+r/2)/2-r/2+s-(`stroke-width`==e.getAttribute`fill`?(500-r/2-u)/2:0),c=document.createElementNS(`http://www.w3.org/2000/svg`,`path`))=>(c.setAttribute(`stroke`,o),c.setAttribute(`stroke-width`,u),c.setAttribute(`pathLength`,l),c.setAttribute(`stroke-dasharray`,a+` `+(l-a)),c.setAttribute(`stroke-dashoffset`,b+a),c.setAttribute(`d`,`m${500+r/2} ${500+r/2}m0 ${-h}a2 2 0 000 ${2*h}a2 2 0 000-${2*h}`),c.setAttribute(`fill`,`none`),c.width=u,c.point=(t=0,e)=>e?n.create(e).point(t):c.getPointAtLength(c.getTotalLength()-c.getTotalLength()/l*(t+(b+a/2))),c);g==b?l||[...e.querySelectorAll`slice`].map((t=>l+=~~t.getAttribute`size`)):l=~~e.getAttribute`size`||100;g||(g=l-s,b=g+`%`);o=n.create(0);n.point=o.point;n.setAttribute(`slice`,u);n.setAttribute(`size`,b);n.setAttribute(`label`,a.innerHTML=e.querySelector`style`?t.innerHTML&&t.innerHTML.replace(`size`,b)||b:``);o.setAttribute(`stroke-dashoffset`,s+=g);[...t.attributes].map((t=>o.setAttribute(t.name,t.value)));a.setAttribute(`y`,n.point(0,~~t.getAttribute`pulltext`||~~e.getAttribute`pulltext`||0).y);a.setAttribute(`x`,n.point(0,~~t.getAttribute`pulltext`||~~e.getAttribute`pulltext`||0).x);n.append(o,a);t.parentNode.replaceChild(n,t);o=n.point(0,Math.abs(~~t.getAttribute`pull`||r));t.hasAttribute`pull`&&n.setAttribute(`transform`,`translate(${o.x-n.point().x} ${o.y-n.point().y})`)}))}))}}