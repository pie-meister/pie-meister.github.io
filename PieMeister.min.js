export default class t extends HTMLElement{connectedCallback(){this.svg(this.attachShadow({mode:`open`}))}svg(t,e=(this.getAttribute`stroke`||`#e33,#3e3,#35e,#ee3,#e5e,#3ee`).split`,`,i=~~this.getAttribute`pull`,s=~~this.getAttribute`gap`,r=0,l=0){setTimeout((u=>{t.innerHTML=`<style>:host{display:inline-block}svg{width:100%}</style><svg xmlns=http://www.w3.org/2000/svg viewBox=0,0,${1e3+i},${1e3+i}>${this.innerHTML}</svg>`;this.$=[...t.querySelectorAll`slice`].map(((t,u)=>{let h=document.createElementNS(`http://www.w3.org/2000/svg`,`g`),a=document.createElementNS(`http://www.w3.org/2000/svg`,`text`),n=t.getAttribute`size`,o=~~n.replace(`%`,``),p=~~t.getAttribute`stroke-width`||~~this.getAttribute`stroke-width`||500+i/2-i,g=r;h.create=(s=0,r=p,u=t.getAttribute(`stroke`)||0==s&&e.shift(),a=o,n=g,b=(500+i/2)/2-i/2+s-(`stroke-width`==this.getAttribute`fill`?(500-i/2-r)/2:0),A=document.createElementNS(`http://www.w3.org/2000/svg`,`path`))=>(A.setAttribute(`stroke`,u),A.setAttribute(`stroke-width`,r),A.setAttribute(`pathLength`,l),A.setAttribute(`stroke-dasharray`,a+` `+(l-a)),A.setAttribute(`stroke-dashoffset`,n+a),A.setAttribute(`d`,`m${500+i/2} ${500+i/2}m0 ${-b}a2 2 0 000 ${2*b}a2 2 0 000-${2*b}`),A.setAttribute(`fill`,`none`),A.width=r,A.point=(t=0,e)=>e?h.create(e).point(t):A.getPointAtLength(A.getTotalLength()-A.getTotalLength()/l*(t+(g+a/2))),A);o==n?l||[...this.querySelectorAll`slice`].map((t=>l+=~~t.getAttribute`size`+s)):l=~~this.getAttribute`size`||100;o||(o=l-r,n=o+`%`);h.path=h.create(0);h.onmouseout=t=>(this.slice=h,this.dispatchEvent(new Event(`slice`),h.pull(0)));h.onmouseover=t=>(this.slice=h,this.dispatchEvent(new Event(`slice`),h.pull(1)));h.setAttribute(`size`,n);h.setAttribute(`slice`,u+1);h.setAttribute(`text`,a.innerHTML=this.querySelector`style`?t.innerHTML&&t.innerHTML.replace(`size`,n)||n:``);h.path.setAttribute(`stroke-dashoffset`,r+=o+s);[...t.attributes].map((t=>h.path.setAttribute(t.name,t.value)));a.setAttribute(`y`,h.path.point(0,~~t.getAttribute`pulltext`||~~this.getAttribute`pulltext`||0).y);a.setAttribute(`x`,h.path.point(0,~~t.getAttribute`pulltext`||~~this.getAttribute`pulltext`||0).x);h.append(h.path,a);t.parentNode.replaceChild(h,t);h.pull=(e=t.hasAttribute`pull`,s=h.path.point(0,Math.abs(~~t.getAttribute`pull`||i)))=>h.setAttribute(`transform`,(h.pulled=e)?`translate(${s.x-h.path.point().x} ${s.y-h.path.point().y})`:``);h.pull();return h}))}))}}