export default class t extends HTMLElement{connectedCallback(){this.svg(this)}svg(t=this,e=t.attachShadow({mode:`open`}),i=(t.getAttribute`stroke`||`#e33,#3e3,#35e,#ee3,#e5e,#3ee`).split`,`,r=~~t.getAttribute`pull`,s=0,l=0){setTimeout((u=>{e.innerHTML=`<style>:host{display:inline-block}svg{width:100%}</style><svg xmlns=http://www.w3.org/2000/svg viewBox=0,0,${1e3+r},${1e3+r}>${t.innerHTML}</svg>`;[...e.querySelectorAll`slice`].map(((e,u)=>{let o,n=document.createElementNS(`http://www.w3.org/2000/svg`,`g`),a=document.createElementNS(`http://www.w3.org/2000/svg`,`text`),b=e.getAttribute`size`,g=~~b.replace(`%`,``),p=~~e.getAttribute`stroke-width`||~~t.getAttribute`stroke-width`||500+r/2-r,A=s;n.create=(s=0,u=p,o=e.getAttribute(`stroke`)||0==s&&i.shift(),a=g,b=A,h=(500+r/2)/2-r/2+s-(`stroke-width`==t.getAttribute`fill`?(500-r/2-u)/2:0),c=document.createElementNS(`http://www.w3.org/2000/svg`,`path`))=>(c.setAttribute(`stroke`,o),c.setAttribute(`stroke-width`,u),c.setAttribute(`pathLength`,l),c.setAttribute(`stroke-dasharray`,a+` `+(l-a)),c.setAttribute(`stroke-dashoffset`,b+a),c.setAttribute(`d`,`m${500+r/2} ${500+r/2}m0 ${-h}a2 2 0 000 ${2*h}a2 2 0 000-${2*h}`),c.setAttribute(`fill`,`none`),c.width=u,c.point=(t=0,e)=>e?n.create(e).point(t):c.getPointAtLength(c.getTotalLength()-c.getTotalLength()/l*(t+(b+a/2))),c);g==b?l||[...t.querySelectorAll`slice`].map((t=>l+=~~t.getAttribute`size`)):l=~~t.getAttribute`size`||100;g||(g=l-s,b=g+`%`);o=n.create(0);n.point=o.point;n.setAttribute(`slice`,u);n.setAttribute(`size`,b);n.setAttribute(`label`,a.innerHTML=t.querySelector`style`?e.innerHTML&&e.innerHTML.replace(`size`,b)||b:``);o.setAttribute(`stroke-dashoffset`,s+=g);[...e.attributes].map((t=>o.setAttribute(t.name,t.value)));a.setAttribute(`y`,n.point(0,~~e.getAttribute`pulltext`||~~t.getAttribute`pulltext`||0).y);a.setAttribute(`x`,n.point(0,~~e.getAttribute`pulltext`||~~t.getAttribute`pulltext`||0).x);n.append(o,a);e.parentNode.replaceChild(n,e);let h=n.point(0,Math.abs(~~e.getAttribute`pull`||r));e.hasAttribute`pull`&&n.setAttribute(`transform`,`translate(${h.x-n.point().x} ${h.y-n.point().y})`)}))}))}}