<html>
  <head>
    <script src="prism.js"></script>
    <link rel="stylesheet" href="prism.css" data-noprefix />
    <script src="elements.pie-meister.js"></script>
    <script src="elements.pie-meister.site-elements.js"></script>
    <template id="PIE-DEMO">
      <style>
        :host {
          display: inline-block;
        }
        div {
          display: grid;
          grid-template-columns: 1fr 2fr 1fr;
        }
      </style>
      <div>
        <slot name="description"></slot>
        <slot name="html"></slot>
        <slot></slot>
      </div>
    </template>
    <!-- <script src="elements.pie-meister.min.js"></script> -->
    <style>
      body {
        --pie-demo-background: lightgrey;
        font-family: Arial;
        max-width: 1024px;
        padding: 1em;
        margin: 0 auto;
      }
      pie-chart {
        max-width: 49vw;
        background: var(--pie-demo-background);
      }
      section {
        background: beige;
      }
      .pi {
        font-size: 1.2em;
      }
      pie-demo {
        padding-top: 1em;
      }
      pie-demo pre {
        padding-left: 2em;
      }
      pie-demo p {
        padding: 0em 1em;
      }
      pie-description {
        padding: 1em;
      }
      header {
        display: grid;
        grid-template-columns: 1fr 1fr;
      }
      header img {
        width: 100%;
      }
      header div {
        padding: 0 1em;
      }
      :not(:defined) {
        background: red;
      }
    </style>
  </head>
  <body>
    <section>
      <header>
        <img src="pi-day-logo.jpg" />
        <div>
          <h1><meister-name></meister-name></h1>
          <h3>
            A <content-length src="elements.pie-meister.min.js"></content-length> &lt;pie-chart> Web Component <br />for
            ... drumroll... pie-charts
          </h3>
          <chart-libraries-table></chart-libraries-table>
          <p>How the Pie Meister tried to create a Web Component in a maximum of 3.14 kiloBytes... and failed</p>
        </div>
      </header>
    </section>
    <section>
      <h2>Usage:</h2>
      <pie-demo>
        <pie-chart pull="200" text="350">
          <style>
            text {
              font-size: 5em;
              text-anchor: middle;
            }
          </style>
          <slice size="10">Configure IDE</slice>
          <slice size="10">Updating dependencies</slice>
          <slice size="40">Programming</slice>
          <slice size="20">Testing</slice>
          <slice size="5">Debugging</slice>
        </pie-chart>
        <pie-description>Minimal HTML to hap<i class="pi">pi</i>ness</pie-description>
      </pie-demo>
      <pie-demo>
        <pie-chart>
          <slice size="10"></slice>
          <slice size="20"></slice>
          <slice size="40"></slice>
        </pie-chart>
        <pie-description>Minimal HTML to hap<i class="pi">pi</i>ness</pie-description>
      </pie-demo>
      <pie-demo data-line="0-">
        <pie-chart>
          <slice size="10%"></slice>
          <slice size="20"></slice>
          <slice size="40"></slice>
        </pie-chart>
        <pie-description>Mark the <b>first</b> slice as a percentage to create a 100 percent pie</pie-description>
      </pie-demo>
      <pie-demo data-line="0-">
        <pie-chart text="5em">
          <slice size="10%"></slice>
          <slice size="20%"></slice>
          <slice size="40%"></slice>
        </pie-chart>
        <pie-description>Mark the <b>first</b> slice as a percentage to create a 100 percent pie</pie-description>
      </pie-demo>
      <pie-demo>
        <pie-description>Format a single pie with <b>inline</b> CSS</pie-description>
        <pie-chart>
          <style>
            text {
              font-size: 5em;
              text-anchor: middle;
            }
          </style>
          <slice size="10%"></slice>
          <slice size="20%"></slice>
          <slice size="40%"></slice>
        </pie-chart>
      </pie-demo>
      <pie-demo>
        <pie-description
          >To 'pull' a slice, specify the distance you want to pull (creating extra padding around the chart), and which
          slice to pull</pie-description
        >
        <pie-chart pull="100">
          <style>
            text {
              font-size: 5em;
              text-anchor: middle;
            }
          </style>
          <slice size="10" pull></slice>
          <slice size="20"></slice>
          <slice size="40"></slice>
        </pie-chart>
      </pie-demo>
      <pie-demo>
        <pie-description>For a Donut chart, change the default 500 stroke-width to a lower value</pie-description>
        <pie-chart stroke-width="200">
          <slice size="10"></slice>
          <slice size="20"></slice>
          <slice size="40"></slice>
          <slice size="40"></slice>
        </pie-chart>
      </pie-demo>
      <pie-demo>
        <pie-description
          >Use a negative pull value to remove (unwanted) padding. <br /><br />The slice is <b>not</b> pulled
          inward</pie-description
        >
        <pie-chart stroke-width="200" pull="-85">
          <slice size="10"></slice>
          <slice size="20" pull></slice>
          <slice size="40"></slice>
          <slice size="40"></slice>
        </pie-chart>
      </pie-demo>
      <pie-demo>
        <pie-description>Labels are positioned from the original pie <pre>stroke-width="500"</pre> default setting. the <pre>text</pre> setting add or subtract an extra radius value</pie-description
        >
        <pie-chart stroke-width="200" pull="-25" text="160">
          <style>
            text {
              font-size: 5em;
              text-anchor: middle;
            }
          </style>
          <slice size="10"></slice>
          <slice size="20" pull="200"></slice>
          <slice size="40" x=100></slice>
          <slice size="40"></slice>
        </pie-chart>
      </pie-demo>
      <pie-demo>
        <pie-description
          >Don't like the 6 default colors? Specify an array of colors and/or color a slice.<br /><br />Note how the
          slice stroke="gold" 'saves' using a color from the colors array</pie-description
        >
        <pie-chart pull="100" colors="blue,red,green">
          <slice size="10" pull></slice>
          <slice size="20" pull></slice>
          <slice size="40" stroke="gold"></slice>
          <slice size="40"></slice>
        </pie-chart>
      </pie-demo>
      <pie-demo>
        <pie-description>Polar chart (attempt)</pie-description>
        <pie-chart pull1="100">
          <slice size="10" stroke-width="500"></slice>
          <slice size="20" stroke-width="200"></slice>
          <slice size="40" stroke-width="300"></slice>
          <slice size="40" stroke-width="100"></slice>
        </pie-chart>
      </pie-demo>
    </section>
    <section>
      <h2><meister-name></meister-name> restrictions</h2>
      <ul>
        <li>A &lt;slice> is converted to a SVG &lt;path> which can <b>not</b> contain HTML<br>
        <pre>&lt;slize size="10">&lt;span> HTML here breaks the SVG &lt;/span>&lt;/slice></pre></li>
      </ul>
    </section>
    <section>
      <h2>Pie Chart Libraries</h2>
      <p>There are some large pies available. Would it be possible to draw pies wih a 1024 Bytes (Gzip) maximum?</p>
    </section>
    <section>
      <pie-chart id="pie1" gap="0" pull="100">
        <style>
          #pie1 text {
            display: inline-block;
            font-size: 80px;
            text-anchor: middle;
            alignment-baseline: central;
            fill: black;
          }
          #pie1 #slice10 text {
            fill: white;
          }
        </style>
        <slice size="12%">VVD</slice>
        <slice size="14"></slice>
        <slice size="13"></slice>
        <slice size="12"></slice>
        <slice size="13"></slice>
      </pie-chart>
      <script>
        pie1.addEventListener("pie1", (evt) => {
          console.log(evt.composedPath());
          console.log(evt.composedPath()[0].slice);
          evt.composedPath()[0].slice.pull(1);
        });
      </script>
      <pie-chart id="pie2" pull="100">
        <style>
          svg text {
            font-size: 100px;
            text-anchor: middle;
            alignment-baseline: central;
            fill: black;
            stroke: black;
            stroke-width: 0.1;
          }
          #slice1 text {
            fill: blue;
            translate: 100px 100px;
          }
          #slice1 {
            displa1y: none;
          }
        </style>
        <g opacity=".7" onmouseover="console.log(this)">
          <slice size="25%" stroke="gold" pull border="black">Angular</slice>
          <slice size="15" onmouseover="console.log(this.slice.pull(1))">Vue</slice>
          <slice size="60">React</slice>
        </g>
      </pie-chart>
      <pie-chart id="rounded" pull="-50" xgap="2" stroke-width="200" xstroke-linecap="round" stroke="red">
        <defs>
          <filter id="round">
            <feGaussianBlur in="SourceGraphic" stdDeviation="1.5" result="blur"></feGaussianBlur>
            <feColorMatrix
              in="blur"
              mode="matrix"
              values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9"
              result="blurred"
            ></feColorMatrix>
            <feComposite in="SourceGraphic" in2="blurred" operator="atop"></feComposite>
          </filter>
        </defs>
        <slice size="45" stroke="blue"></slice>
        <slice size="90" stroke="orange"></slice>
        <slice size="45" stroke="rebeccapurple"></slice>
        <slice size="45" stroke="gold"></slice>
        <slice size="45" stroke="firebrick" pull></slice>
        <!-- <circle r="30" cx="50%" cy="50%" fill="beige"></circle> -->
      </pie-chart>
    </section>
    <section>
      <h2>GZip analysis</h2>
      <p>Can you squeeze out more bytes? (red = costly encoding)</p>
      <img src="gzip_analysis.png" />
      <!-- <img src="https://www.rgraph.net/images/svg-activity-meter-snippet.png"> -->
    </section>
  </body>
</html>
