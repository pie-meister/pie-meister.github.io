customElements.define("pie-chart",class extends HTMLElement{connectedCallback(){setTimeout((()=>this.svg(this.attachShadow({mode:"open"}))))}svg(t,e=(this.getAttribute("stroke")||"#3c3,#c33,#33c,#cc3,#c3c,#3cc").split(","),i=~~this.getAttribute("pull"),s=0,r=0){t.innerHTML=`<style>:host{display:inline-block}svg{width:100%}</style><svg part=svg viewBox=0,0,${1e3+i},${1e3+i}>${this.innerHTML}</svg>`;[...t.querySelectorAll("slice")].map(((t,l)=>{let n,a=document.createElementNS("http://www.w3.org/2000/svg","g"),u=document.createElementNS("http://www.w3.org/2000/svg","text"),o=t.getAttribute("size")||"",h=~~o.replace("%",""),p=~~t.getAttribute("stroke-width")||~~this.getAttribute("stroke-width")||500+i/2-i,g=s;a.path=(s=0,l=p,u=t.getAttribute("stroke")||(n?"":e.shift()),o=h,b=g,c=(500+i/2)/2-i/2+s-("stroke-width"==this.getAttribute("fill")?(500-i/2-l)/2:0),A=document.createElementNS("http://www.w3.org/2000/svg","path"))=>(A.setAttribute("part","path"),A.setAttribute("stroke",u),A.setAttribute("stroke-width",l),A.setAttribute("pathLength",r),A.setAttribute("stroke-dasharray",o+" "+(r-o)),A.setAttribute("d",`m${500+i/2},${500+i/2}m0,${-c}a2,2,0,000,${2*c}a2,2,0,000-${2*c}`),A.setAttribute("fill","none"),A.getPoint=(t=0,e)=>e?a.path(e).getPoint(t):A.getPointAtLength(A.getTotalLength()-A.getTotalLength()/r*(t+(b+o/2))),A);h==o?r||[...this.querySelectorAll("slice")].map((t=>r+=~~t.getAttribute("size"))):r=~~this.getAttribute("size")||100;h||(h=r-s,o=h+"%");n=a.path(~~t.getAttribute("radius"));a.points=[[0,0],[h/-2,p/-2],[h/-2,p/2],[h/2,p/-2],[h/2,p/2],[0,p/-2],[0,p/2],[0,~~t.getAttribute("pulltext")||~~this.getAttribute("pulltext")||0],[0,Math.abs(~~t.getAttribute("pull")||i)]].map((([t,e])=>n.getPoint(t,e)));a.setAttribute("part","slice"+l);a.setAttribute("size",o);a.setAttribute("label",u.innerHTML=this.querySelector("style")?t.innerHTML?t.innerHTML.replace("$size",o):o:"");n.setAttribute("stroke-dashoffset","top"==this.getAttribute("offset")?h-r:s+=h);[...t.attributes].map((t=>n.setAttribute(t.name,t.value)));u.setAttribute("part","text");u.setAttribute("x",t.getAttribute("x")||("top"==this.getAttribute("offset")?"50%":a.points[7].x));u.setAttribute("y",t.getAttribute("y")||("top"==this.getAttribute("offset")?"50%":a.points[7].y));a.append(n,u);t.replaceWith(a);t.hasAttribute("pull")&&a.setAttribute("transform",`translate(${a.points[8].x-a.points[0].x} ${a.points[8].y-a.points[0].y})`)}))}});customElements.define("progress-circle",class extends(customElements.get("pie-chart")){connectedCallback(){setTimeout((()=>{let t=(t,e,i,s,r="",l="",n)=>`<slice part=${t} size=${e} stroke-width=${s} radius=${n} stroke=${i} ${r}>${l}</slice>`,e=(e,i,s)=>{let r=e.getAttribute("stroke")||"green",l=this.getAttribute("width")?~~this.getAttribute("width"):e.getAttribute("width")?~~e.getAttribute("width"):70,n=-i*l-i*l/10+30,a=!1,u=this.getAttribute("fill")?"fill="+this.getAttribute("fill"):""==e.innerHTML?(a=r,"fill="+r):"fill=none",o=s.length>1?"<tspan part=label x=59% >"+e.innerHTML+" </tspan><tspan part=value> $size</tspan>":""==e.innerHTML?`<tspan part=value x=50% y=62% ${a?"font-size=6em fill="+a:""}>$size</tspan>`:"<tspan part=label x=50% y=330>"+e.innerHTML+"</tspan><tspan part=value x=50% y=510 font-size=5em >$size</tspan>";return t("background","100%",this.getAttribute("background")||r,l,u," ",n)+t("edge",e.getAttribute("value"),e.getAttribute("edge")||this.getAttribute("edge")||"#000",l,void 0," ",n)+t("circle x=438 y="+(64+i*(1.1*l)),e.getAttribute("value"),r,.9*l,void 0,o,n)+"<pie-chart></pie-chart>"},i=[...this.querySelectorAll("progress")];this.innerHTML="<style>path{stroke-linecap:round}"+(i.length>1?"text{text-anchor:end;alignment-baseline:middle;font-size:2em}[part='text'] tspan:nth-child(2){font-size:1.5em;fill:white;font-weight:bold}":`text{text-anchor:middle;alignment-baseline:middle;font-size:2.5em;fill:${this.getAttribute("color")||""}}[part="label"]{font-size:2em}`)+"[part='background']{opacity:0.3}</style>"+this.innerHTML+(this.getAttribute("value")?(this.setAttribute("range"+10*~~(this.getAttribute("value").replace("%","")/10),this.getAttribute("value")),e(this,0,[])):i.map(e).join(""));this.setAttribute("offset","top");this.setAttribute("pull",this.getAttribute("pull")||"-230");this.setAttribute("part","chart");super.connectedCallback();setTimeout((()=>{[...this.querySelectorAll("slice")].map((t=>t.remove()))}))}))}});