customElements.define("pie-chart",class extends HTMLElement{connectedCallback(){this.attachShadow({mode:"open"});setTimeout((()=>this.svg()))}svg(t=(this.getAttribute("stroke")||"#e24,#2a4,#fe2,#46e,#f92").split`,`,e=~~this.getAttribute("pull"),i=~~this.getAttribute("gap"),s=0,r="http://www.w3.org/2000/svg",l=0){this.shadowRoot.innerHTML=`<style>:host{display:inline-block}svg{width:100%}</style><svg id=${this.id} xmlns=${r} viewBox="0 0 ${1e3+e} ${1e3+e}">${this.innerHTML}</svg>`;this.slices=[...this.shadowRoot.querySelectorAll("slice")].map(((u,n)=>{let a=u.getAttribute("size"),h=~~a.replace("%",""),o=~~u.getAttribute("stroke-width")||~~this.getAttribute("stroke-width")||500+e/2-e,b=(t,i=(500+e/2)/2-e/2+t-("stroke-width"==this.getAttribute("fill")?(500-e/2-o)/2:0),u=document.createElementNS(r,"path"))=>(u.setAttribute("pathLength",l),u.setAttribute("stroke-width",o),u.setAttribute("stroke-dasharray",h+" "+(l-h)),u.setAttribute("d",`m${500+e/2} ${500+e/2}m0 ${-i}a1 1 0 000 ${2*i}a1 1 0 000-${2*i}`),u.setAttribute("fill","none"),u.M=()=>u.getPointAtLength(u.getTotalLength()-u.getTotalLength()/l*(s+h/2)),u);h==a?l||[...this.querySelectorAll("slice")].map((t=>l+=~~t.getAttribute("size")+i)):l=~~this.getAttribute("size")||100;h||(h=l-s,a=h+"%");let g=b(0),A=b(Math.abs(~~u.getAttribute("pull")||e)).M(),p=b(~~this.getAttribute("text")||60).M(),c=document.createElementNS(r,"g"),d=document.createElementNS(r,"text");c.path=g;c.p=g.M();g.setAttribute("stroke",u.getAttribute("stroke")||t.shift());c.onmouseout=()=>(this.g=c,this.dispatchEvent(new Event("slice")));c.onmouseover=()=>(this.g=c,this.dispatchEvent(new Event("slice")));c.setAttribute("size",a);c.setAttribute("slice",n+1);c.setAttribute("label",d.innerHTML=u.innerHTML&&u.innerHTML.replace("size",a)||a);c.pull=t=>c.setAttribute("transform",(c.pulled=t)?`translate(${A.x-c.p.x} ${A.y-c.p.y})`:"");g.setAttribute("stroke-dashoffset",s+=h+i);[...u.attributes].map((t=>g.setAttribute(t.name,t.value)));d.setAttribute("y",p.y+~~u.getAttribute("y"));d.setAttribute("x",p.x+~~u.getAttribute("x"));c.append(g,d);u.parentNode.replaceChild(c,u);c.pull(u.hasAttribute("pull"));return c}))}});