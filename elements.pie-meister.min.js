customElements.define("pie-chart",class extends HTMLElement{connectedCallback(){this.attachShadow({mode:"open"}),setTimeout((()=>this.svg()))}svg(t=(this.getAttribute("stroke")||"#e24,#2a4,#fe2,#46e,#f92").split`,`,e=~~this.getAttribute("pull"),i=~~this.getAttribute("gap"),s=0,r="http://www.w3.org/2000/svg",l=0){this.shadowRoot.innerHTML=`<style>:host{display:inline-block}svg{width:100%}</style><svg id=${this.id} xmlns=${r} viewBox="0 0 ${1e3+e} ${1e3+e}">${this.innerHTML}</svg>`,[...this.shadowRoot.querySelectorAll("slice")].map(((h,u)=>{let n=h.getAttribute("size"),a=~~n.replace("%",""),o=~~h.getAttribute("stroke-width")||~~this.getAttribute("stroke-width")||500+e/2-e;a==n?l||[...this.querySelectorAll("slice")].map((t=>l+=~~t.getAttribute("size")+i)):l=~~this.getAttribute("size")||100,a||(a=100-s,n=a+"%"),this.slice=(t,i=(500+e/2)/2-e/2+t-("stroke-width"==this.getAttribute("fill")?(500-e/2-o)/2:0),h=document.createElementNS(r,"path"))=>(h.setAttribute("d",`m${500+e/2} ${500+e/2}m0 ${-i}a1 1 0 000 ${2*i}a1 1 0 000-${2*i}`),h.setAttribute("pathLength",l),h.setAttribute("fill","none"),h.setAttribute("stroke-width",o),h.setAttribute("stroke-dasharray",a+" "+(l-a)),h.M=()=>h.getPointAtLength(h.getTotalLength()-h.getTotalLength()/l*(s+a/2)),h);let b=this.slice(0),g=this.slice(Math.abs(~~h.getAttribute("pull")||e)).M(),A=this.slice(~~this.getAttribute("text")||60).M(),c=document.createElementNS(r,"g"),p=document.createElementNS(r,"text");c.p=b.M(),b.setAttribute("stroke",h.getAttribute("stroke")||t.shift()),c.onmouseover=()=>(this.g=c,this.dispatchEvent(new Event("slice"))),c.onmouseout=()=>(this.g=c,this.dispatchEvent(new Event("slice"))),c.setAttribute("slice",u+1),c.setAttribute("size",n),c.setAttribute("label",p.innerHTML=h.innerHTML&&h.innerHTML.replace("size",n)||n),c.pull=t=>c.setAttribute("transform",(c.pulled=t)?`translate(${g.x-c.p.x} ${g.y-c.p.y})`:""),b.setAttribute("stroke-dashoffset",s+=a+i),[...h.attributes].map((t=>b.setAttribute(t.name,t.value))),p.setAttribute("x",A.x+~~h.getAttribute("x")),p.setAttribute("y",A.y+~~h.getAttribute("y")),c.append(b,p),h.parentNode.replaceChild(c,h),c.pull(h.hasAttribute("pull"))}))}});