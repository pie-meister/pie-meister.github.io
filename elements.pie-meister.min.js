customElements.define("pie-chart",class extends HTMLElement{connectedCallback(){this.attachShadow({mode:"open"}),setTimeout((()=>this.svg()))}svg(t=(this.getAttribute("stroke")||"#e24,#2a4,#fe2,#46e,#f92").split`,`,e=~~this.getAttribute("pull"),s=~~this.getAttribute("gap"),i=0,r="http://www.w3.org/2000/svg",l=0){this.shadowRoot.innerHTML=`<style>:host{display:inline-block}svg{width:100%}</style><svg id=${this.id} xmlns=${r} viewBox="0 0 ${1e3+e} ${1e3+e}">${this.innerHTML}</svg>`,[...this.shadowRoot.querySelectorAll("slice")].map(((a,h)=>{let n=a.getAttribute("size"),u=~~n.replace("%",""),o=~~a.getAttribute("stroke-width")||~~this.getAttribute("stroke-width")||500+e/2-e;u==n?l||[...this.querySelectorAll("slice")].map((t=>l+=~~t.getAttribute("size")+s)):l=100,u||(u=100-i),this.slice=(t,s=(500+e/2)/2-e/2+t-(this.hasAttribute("polar")?(500-o)/2:0),a=document.createElementNS(r,"path"))=>(a.setAttribute("d",`m${500+e/2} ${500+e/2}m0 ${-s}a1 1 0 000 ${2*s}a1 1 0 000-${2*s}`),a.setAttribute("pathLength",l),a.setAttribute("fill","none"),a.setAttribute("stroke-width",o),a.setAttribute("stroke-dasharray",u+" "+(l-u)),a.M=()=>a.getPointAtLength(a.getTotalLength()-a.getTotalLength()/l*(i+u/2)),a);let b=this.slice(0),c=this.slice(Math.abs(~~a.getAttribute("pull")||e)).M(),A=this.slice(~~this.getAttribute("text")||60).M(),g=document.createElementNS(r,"g"),p=document.createElementNS(r,"text");g.path=b,g.p=b.M(),b.setAttribute("stroke",a.getAttribute("stroke")||t.shift()),g.onmouseover=()=>(this.g=g,this.dispatchEvent(new Event("slice"))),g.onmouseout=()=>(this.g=g,this.dispatchEvent(new Event("slice"))),g.setAttribute("slice",h+1),g.setAttribute("size",n),g.setAttribute("label",p.innerHTML=a.innerHTML&&a.innerHTML.replace("size",n)||n),g.pull=t=>g.setAttribute("transform",(g.pulled=t)?`translate(${c.x-g.p.x} ${c.y-g.p.y})`:"translate(0 0)"),b.setAttribute("stroke-dashoffset",i+=u+s),[...a.attributes].map((t=>b.setAttribute(t.name,t.value))),p.setAttribute("x",A.x+~~a.getAttribute("x")),p.setAttribute("y",A.y+~~a.getAttribute("y")),g.append(b,this.querySelector("style")&&p),a.parentNode.replaceChild(g,a),g.pull(a.hasAttribute("pull"))}))}});