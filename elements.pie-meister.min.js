customElements.define("pie-chart",class extends HTMLElement{connectedCallback(){this.attachShadow({mode:"open"});setTimeout((()=>this.svg()))}svg(t=(this.getAttribute("stroke")||"#e24,#2a4,#fe2,#46e,#f92").split`,`,e=~~this.getAttribute("pull"),i=~~this.getAttribute("gap"),s=0,r="http://www.w3.org/2000/svg",l=0){this.shadowRoot.innerHTML=`<style>:host{display:inline-block}svg{width:100%}</style><svg id=${this.id} xmlns=${r} viewBox="0 0 ${1e3+e} ${1e3+e}">${this.innerHTML}</svg>`;this.slices=[...this.shadowRoot.querySelectorAll("slice")].map(((n,u)=>{let a=n.getAttribute("size"),o=~~a.replace("%",""),h=~~n.getAttribute("stroke-width")||~~this.getAttribute("stroke-width")||500+e/2-e,b=s,g=(i,s=h,u=o,a=n.getAttribute("stroke")||0==i&&t.shift(),g=(500+e/2)/2-e/2+i-("stroke-width"==this.getAttribute("fill")?(500-e/2-s)/2:0),A=document.createElementNS(r,"path"))=>(A.setAttribute("stroke",a),A.setAttribute("stroke-width",s),A.setAttribute("pathLength",l),A.setAttribute("stroke-dasharray",u+" "+(l-u)),A.setAttribute("d",`m${500+e/2} ${500+e/2}m0 ${-g}a2 2 0 000 ${2*g}a2 2 0 000-${2*g}`),A.setAttribute("fill","none"),A.point=()=>A.getPointAtLength(A.getTotalLength()-A.getTotalLength()/l*(b+u/2)),A);o==a?l||[...this.querySelectorAll("slice")].map((t=>l+=~~t.getAttribute("size")+i)):l=~~this.getAttribute("size")||100;o||(o=l-s,a=o+"%");let A=g(0),p=g(Math.abs(~~n.getAttribute("pull")||e)).point(),c=g(~~this.getAttribute("text")||60).point(),d=document.createElementNS(r,"g"),m=document.createElementNS(r,"text"),w=A.point();d.path=A;d.create=g;d.onmouseout=()=>(this.g=d,this.dispatchEvent(new Event("slice")));d.onmouseover=()=>(this.g=d,this.dispatchEvent(new Event("slice")));d.setAttribute("size",a);d.setAttribute("slice",u+1);d.setAttribute("label",m.innerHTML=n.innerHTML&&n.innerHTML.replace("size",a)||a);d.pull=t=>d.setAttribute("transform",(d.pulled=t)?`translate(${p.x-w.x} ${p.y-w.y})`:"");A.setAttribute("stroke-dashoffset",s+=o+i);[...n.attributes].map((t=>A.setAttribute(t.name,t.value)));m.setAttribute("y",c.y+~~n.getAttribute("y"));m.setAttribute("x",c.x+~~n.getAttribute("x"));d.append(A,m);n.parentNode.replaceChild(d,n);d.pull(n.hasAttribute("pull"));return d}))}});