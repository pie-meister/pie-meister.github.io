customElements.define("pie-chart",class extends HTMLElement{connectedCallback(){this.attachShadow({mode:"open"});setTimeout((()=>this.svg()))}svg(t=(this.getAttribute("colors")||"#e24,#2a4,#fe2,#46e,#f92").split`,`,e=~~this.getAttribute("pull"),s=~~this.getAttribute("gap"),i=0,r="http://www.w3.org/2000/svg",l=0){this.shadowRoot.innerHTML=`<style>:host{display:inline-block}svg{width:100%}</style><svg id=${this.id} xmlns=${r} viewBox="0 0 ${1e3+e} ${1e3+e}">${this.innerHTML}</svg>`;this.slices=[...this.shadowRoot.querySelectorAll("slice")].map(((a,h)=>{let o=a.getAttribute("size"),u=~~o.replace(/\%/,""),n=~~a.getAttribute("stroke-width")||~~this.getAttribute("stroke-width")||500+e/2-e;u==o?l||[...this.querySelectorAll("slice")].map((t=>l+=~~t.getAttribute("size")+s)):l=~~this.getAttribute("scale")||100;this.slice=(s,h=a.getAttribute("stroke")||t.shift(),o=n,b=(500+e/2)/2-e/2+s,c=document.createElementNS(r,"path"))=>(c.setAttribute("d",`m${500+e/2} ${500+e/2}m0 ${-b}a1 1 0 000 ${2*b}a1 1 0 000-${2*b}`),c.setAttribute("pathLength",l),c.setAttribute("fill","none"),c.setAttribute("stroke-width",o),c.setAttribute("stroke",h),c.setAttribute("stroke-dasharray",u+" "+(l-u)),c.M=()=>c.getPointAtLength(c.getTotalLength()-c.getTotalLength()/l*(i+u/2)),c);let b=this.slice(0),c=b.M(),g=this.slice(n/2,a.getAttribute("border")||this.getAttribute("border"),10),A=this.slice(Math.abs(~~a.getAttribute("pull")||e),0).M(),d=this.slice(~~this.getAttribute("text")||60,0).M(),p=document.createElementNS(r,"g"),m=document.createElementNS(r,"text"),w=a.hasAttribute("pull");b.onmouseover=()=>b.dispatchEvent(new Event(this.id,{bubbles:1,composed:1}));i+=u+s;b.setAttribute("stroke-dashoffset",i);g.setAttribute("stroke-dashoffset",i);[...a.attributes].map((t=>b.setAttribute(t.name,t.value)));m.setAttribute("x",d.x+~~a.getAttribute("x"));m.setAttribute("y",d.y+~~a.getAttribute("y"));m.innerHTML=a.innerHTML||o;p.append(b,m,g);p.id="slice"+(h+1);a.parentNode.replaceChild(p,a);b.slice={p:b,c:c,l:m,pull:t=>p.setAttribute("transform",t?`translate(${A.x-c.x} ${A.y-c.y})`:"translate(0 0)")};b.slice.pull(w);return b.slice}))}});