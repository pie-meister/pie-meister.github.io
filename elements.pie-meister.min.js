customElements.define("pie-chart",class extends HTMLElement{connectedCallback(){this.attachShadow({mode:"open"});setTimeout((()=>this.svg()))}svg(t=(this.getAttribute("colors")||"#e24,#2a4,#fe2,#46e,#f92").split`,`,e=~~this.getAttribute("pull"),s=~~this.getAttribute("gap"),i=0,r="http://www.w3.org/2000/svg",l=0){this.shadowRoot.innerHTML=`<style>:host{display:inline-block}svg{width:100%}</style><svg id=${this.id} xmlns=${r} viewBox="0 0 ${1e3+e} ${1e3+e}">${this.innerHTML}</svg>`;this.slices=[...this.shadowRoot.querySelectorAll("slice")].map(((h,a)=>{let n=h.getAttribute("size"),u=~~n.replace(/\%/,""),o=~~h.getAttribute("stroke-width")||~~this.getAttribute("stroke-width")||500+e/2-e;u==n?l||[...this.querySelectorAll("slice")].map((t=>l+=~~t.getAttribute("size")+s)):l=~~this.getAttribute("scale")||100;this.sliced=(t,s=o,h=(500+e/2)/2-e/2+t-(this.hasAttribute("polar")?(500-o)/2:0),a=document.createElementNS(r,"path"))=>(a.setAttribute("d",`m${500+e/2} ${500+e/2}m0 ${-h}a1 1 0 000 ${2*h}a1 1 0 000-${2*h}`),a.setAttribute("pathLength",l),a.setAttribute("fill","none"),a.setAttribute("stroke-width",s),a.setAttribute("stroke-dasharray",u+" "+(l-u)),a.M=()=>a.getPointAtLength(a.getTotalLength()-a.getTotalLength()/l*(i+u/2)),a);let d=this.sliced(0),b=d.M(),c=this.sliced(Math.abs(~~h.getAttribute("pull")||e)).M(),A=this.sliced(~~this.getAttribute("text")||60).M(),g=document.createElementNS(r,"text"),p=document.createElementNS(r,"g");d.setAttribute("stroke",h.getAttribute("stroke")||t.shift());d.onmouseenter=()=>(this.slice=p,this.dispatchEvent(new Event(this.id)));d.onmouseout=()=>(this.slice=p,this.dispatchEvent(new Event(this.id)));p.pull=t=>{p.pulled=t;p.setAttribute("transform",t?`translate(${c.x-b.x} ${c.y-b.y})`:"translate(0 0)")};i+=u+s;d.setAttribute("stroke-dashoffset",i);[...h.attributes].map((t=>d.setAttribute(t.name,t.value)));g.setAttribute("x",A.x+~~h.getAttribute("x"));g.setAttribute("y",A.y+~~h.getAttribute("y"));g.innerHTML=h.innerHTML||n;p.append(d,this.hasAttribute("label")&&g);p.id="slice"+(a+1);h.parentNode.replaceChild(p,h);p.pull(h.hasAttribute("pull"));return p}))}});